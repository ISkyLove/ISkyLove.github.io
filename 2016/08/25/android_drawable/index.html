<!DOCTYPE html>
<html >
<head>
  <meta charset="utf-8">
  
  <title>(转)领略千变万化的Android Drawable | 剑客爱编程</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="http://blog.csdn.net/javazejian/article/details/52247324出自【zejian的博客】
Android Drawable 相信大家都不陌生，本篇我们就来全面深入了解它，Drawable是一种可以在Canvas上进行绘制的抽象的图像，它的子类也相当多，所以在开发中很容易导致我们对不同Drawable的理解产生混乱，因此我们很有必要来全面了解一下Dr">
<meta property="og:type" content="article">
<meta property="og:title" content="(转)领略千变万化的Android Drawable">
<meta property="og:url" content="https://iskylove.github.io/2016/08/25/android_drawable/index.html">
<meta property="og:site_name" content="剑客爱编程">
<meta property="og:description" content="http://blog.csdn.net/javazejian/article/details/52247324出自【zejian的博客】
Android Drawable 相信大家都不陌生，本篇我们就来全面深入了解它，Drawable是一种可以在Canvas上进行绘制的抽象的图像，它的子类也相当多，所以在开发中很容易导致我们对不同Drawable的理解产生混乱，因此我们很有必要来全面了解一下Dr">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_1.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_2.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_3.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_4.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_5.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_6.gif">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_7.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_8.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_9.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_10.gif">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_11.gif">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_11.gif">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_13.gif">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_14.gif">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_15.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_16.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_17.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_18.png">
<meta property="og:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_19.gif">
<meta property="og:updated_time" content="2016-08-25T15:57:08.503Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="(转)领略千变万化的Android Drawable">
<meta name="twitter:description" content="http://blog.csdn.net/javazejian/article/details/52247324出自【zejian的博客】
Android Drawable 相信大家都不陌生，本篇我们就来全面深入了解它，Drawable是一种可以在Canvas上进行绘制的抽象的图像，它的子类也相当多，所以在开发中很容易导致我们对不同Drawable的理解产生混乱，因此我们很有必要来全面了解一下Dr">
<meta name="twitter:image" content="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_1.png">
  
    <link rel="alternative" href="/atom.xml" title="剑客爱编程" type="application/atom+xml">
  
  
    <link rel="icon" href="http://7xtazt.com1.z0.glb.clouddn.com/blog_headhead_small.jpg">
  
  
      <link href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css" rel="stylesheet">
  
  
      <link href="//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css" rel="stylesheet">
  
  
      <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
      <link href="//cdn.bootcss.com/pace/1.0.2/themes/orange/pace-theme-minimal.css" rel="stylesheet">
  
  <link rel="stylesheet" href="/css/style.css">
  
  <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">
  
  <script src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/clipboard.js/1.5.9/clipboard.min.js"></script>
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false,
          fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
          scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.0.9/scrollreveal.min.js"
      }
  </script>

  
      <script>
          yiliaConfig.rootUrl = "/";
      </script>
  

  
  
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="http://7xtazt.com1.z0.glb.clouddn.com/blog_headhead.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">剑客爱编程</a></h1>
        </hgroup>

        
                


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">博客主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/aath/">aath</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/adnroid/">adnroid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/all/">all</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/alogorithm/">alogorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animator/">animator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apktool/">apktool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/broadcast/">broadcast</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/decompile/">decompile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dex2jar/">dex2jar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jd-gui/">jd-gui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reflect/">reflect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svnchecker/">svnchecker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/心灵鸡汤/">心灵鸡汤</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/经验/">经验</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/ISkyLove">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.cnblogs.com/jiankeaibiancheng/">博客园</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">武林至尊，宝刀屠龙，号令天下，莫敢不从，倚天不出，谁与争锋？</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">剑客爱编程</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="http://7xtazt.com1.z0.glb.clouddn.com/blog_headhead.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">剑客爱编程</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">博客主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                        </ul>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-android_drawable" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/25/android_drawable/" class="article-date">
      <time datetime="2016-08-25T15:57:20.211Z" itemprop="datePublished">2016-08-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      (转)领略千变万化的Android Drawable
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/android/">android</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://blog.csdn.net/javazejian/article/details/52247324" target="_blank" rel="external">http://blog.csdn.net/javazejian/article/details/52247324</a><br>出自【zejian的博客】</p>
<p>Android Drawable 相信大家都不陌生，本篇我们就来全面深入了解它，Drawable是一种可以在Canvas上进行绘制的抽象的图像，它的子类也相当多，所以在开发中很容易导致我们对不同Drawable的理解产生混乱，因此我们很有必要来全面了解一下Drawable的子类及其使用方式滴，哈~。<a id="more"></a></p>
<h1 id="Drawable的简述"><a href="#Drawable的简述" class="headerlink" title="Drawable的简述"></a>Drawable的简述</h1><p>  Drawable在我们开发中常被用来作为View的背景图像，一般情况下我们都是通过XML来定义Drawable的，当然我们也可以通过代码创建Drawable，只不过会比较复杂而已。Drawable最大的好处就是可以方便我们做出一些特殊的UI效果，这点比我们自定义View实现的效果来得更容易些。因此深入理解Drawable的用法还是很有必要的，接下来我们来看看Drawable的一些特性：</p>
<pre><code>1、Drawable本身表示的只是一种图像的概念，因此Drawable不仅仅是图片，也可以是颜色构造出来的图像效果（后面会说明）。
2、Drawable本身是一个抽象类，因此具体的实现都是由子类完成的，比如ShapeDrawable，BitmapDrawable等。
3、Drawable的内部宽高可以分别通过getIntrinsicWidth()和getIntrinsicHeight()获取，但并不是所有的Drawable都有内部宽高的属性，比如一个颜色形成的Drawable并没有宽高的概念。在大多数情况下，Drawable并没有大小的概念，因为当Drawable作为View的背景图时，Drawable会被拉伸至View的同等大小。
</code></pre><h1 id="千变万化的Drawable"><a href="#千变万化的Drawable" class="headerlink" title="千变万化的Drawable"></a>千变万化的Drawable</h1><h2 id="BitmapDrawable"><a href="#BitmapDrawable" class="headerlink" title="BitmapDrawable"></a>BitmapDrawable</h2><p>  BitmapDrawable 是对bitmap的一种包装，可以设置它包装的bitmap在BitmapDrawable区域内的绘制方式，如平铺填充、拉伸填充或者保持图片原始大小，也可以在BitmapDrawable区域内部使用gravity指定的对齐方式。其语法如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">bitmap</span></span><br><span class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:src</span>=<span class="string">"@[package:]drawable/drawable_resource"</span></span><br><span class="line">    <span class="attr">android:antialias</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">    <span class="attr">android:dither</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">    <span class="attr">android:filter</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">    <span class="attr">android:gravity</span>=<span class="string">[</span>"<span class="attr">top</span>" | "<span class="attr">bottom</span>" | "<span class="attr">left</span>" | "<span class="attr">right</span>" | "<span class="attr">center_vertical</span>" |</span><br><span class="line">                      "<span class="attr">fill_vertical</span>" | "<span class="attr">center_horizontal</span>" | "<span class="attr">fill_horizontal</span>" |</span><br><span class="line">                      "<span class="attr">center</span>" | "<span class="attr">fill</span>" | "<span class="attr">clip_vertical</span>" | "<span class="attr">clip_horizontal</span>"]</span><br><span class="line">    <span class="attr">android:tileMode</span>=<span class="string">[</span>"<span class="attr">disabled</span>" | "<span class="attr">clamp</span>" | "<span class="attr">repeat</span>" | "<span class="attr">mirror</span>"] </span><br><span class="line">     /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>我们分析一下这些属性的含义：<br>android:src<br>  类型：Drawable resource。必需。 引用一个drawable resource.<br>android:antialias<br>  类型：Boolean。是否开启抗锯齿。开启后图片会变得更平滑些，因此一般建议开启，设置为true即可。<br>android:dither<br>  类型：Boolean。是否允许抖动，如果位图与屏幕的像素配置不同时，开启这个选项可以让高质量的图片在低质量的屏幕上保持较好的显示效果（例如：一个位图的像素设置是 ARGB 8888，但屏幕的设置是RGB 565，开启这个选项可以是图片不过于失真）一般建议开启，为true即可。<br>android:filter<br>  类型：Boolean。是否允许对位图进行滤波。当图片被压缩或者拉伸时，使用滤波可以获得平滑的外观效果。一般建议开启，为true即可<br>android:gravity<br>  当图片小于容器尺寸时，设置此选项可以对图片经典定位，这个属性比较多，不同选项可以使用‘|’来组合使用。<br>可选项     含义<br>top     将图片放在容器顶部，不改变图片大小<br>bottom     将图片放在容器底部，不改变图片大小<br>left     将图片放在容器左侧，不改变图片大小<br>right     将图片放在容器右侧，不改变图片大小<br>center_vertical     图片竖直居中，不改变图片大小<br>fill_vertical     图片竖直方向填充容器<br>center_horizontal     图片水平居中，不改变图片大小<br>fill_horizontal     图片水平方向填充容器<br>center     使图片在水平方向和竖直方向同时居中，不改变图片大小<br>fill     图片填充容器，默认值<br>clip_vertical     竖直方向剪切，很少使用<br>clip_horizontal     水平方向剪切，很少使用</p>
<p>android:mipMap<br>  纹理映射处理技术，不太懂，不过一般也不用，默认为false<br>android:tileMode<br>  平铺模式。共有以下几个值<br>  disabled ：默认值，表示不使用平铺<br>  clamp ：复制边缘色彩<br>  repeat ：X、Y 轴进行重复图片显示，也就是我们说要说的平铺<br>  mirror ：在水平和垂直方向上使用交替镜像的方式重复图片的绘制<br>  三者区别如下图：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_1.png" alt="picture1"><br>  BitmapDrawable的xml使用方式比较简单，我们这里就不贴案例了哈。接下来我们来看看在代码中如何使用BitmapDrawable。<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_2.png" alt="picture1"><br>  实际上我们从BitmapDrawable的源码可以看出，目前Google建议我们创建BitmapDrawable的构造方法有3种<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">BitmapDrawable</span><span class="params">(Resources res, Bitmap bitmap)</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title">BitmapDrawable</span><span class="params">(Resources res, String filepath)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title">BitmapDrawable</span><span class="params">(Resources res, java.io.InputStream is)</span></span></span><br></pre></td></tr></table></figure></p>
<p>  参数比较简单，res就是我们通过getResource()获取到的资源管理对象，bitmap就是我们需要用BitmapDrawable包装的图片对象，filepath，需要包装的图片所在路径，is则是一个图像流，需要转换成 BitmapDrawable。但是在大多数情况下我们还是建议使用xml实现比较好，代码实现我们不打算深究，我们这里直接给出一个代码应用案例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Bitmap mBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.image1);</span><br><span class="line">BitmapDrawable mBitmapDrawable = <span class="keyword">new</span> BitmapDrawable(getResources()，mBitmap);</span><br><span class="line">mBitmapDrawable.setTileModeXY(TileMode.MIRROR, TileMode.MIRROR);<span class="comment">//平铺方式</span></span><br><span class="line">mBitmapDrawable.setAntiAlias(<span class="keyword">true</span>);<span class="comment">//抗锯齿</span></span><br><span class="line">mBitmapDrawable.setDither(<span class="keyword">true</span>);<span class="comment">//防抖动</span></span><br><span class="line"><span class="comment">//设置到imageView上即可</span></span><br><span class="line">imageView.setImageDrawable(mBitmapDrawable);</span><br></pre></td></tr></table></figure></p>
<p>2、NinePatchDrawable</p>
<p>  NinePatchDrawable表示的是我们熟悉的.9格式的图片，.9图片可以在保证图片不失真的情况下任意进行缩放，在实际的使用中我们也是通过Xml来实现即可：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">nine-patch</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>   </span><br><span class="line">    <span class="attr">android:src</span>=<span class="string">"drawable/resource"</span>  </span><br><span class="line">    <span class="attr">android:dither</span>=<span class="string">"[true|false]"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>  属性和BitmapDrawable中属性的含义相同，这里不过多描述。一般情况下不建议代码创建.9图，因为Android虽然可以使用Java代码创建NinePatchDrawable，但是极少情况会那么做，这是因为由于Android SDK会在编译工程时对点九图片进行编译，形成特殊格式的图片。使用代码创建NinePatchDrawable时只能针对编译过的点九图片资源，对于没有编译过的点九图片资源都当做BitmapDrawable对待。还有点需要特别注意的是，点九图只能适用于拉伸的情况，对于压缩的情况并不适用，如果需要适配很多分辨率的屏幕时需要把点九图做的小一点。<br>3、ShapeDrawable</p>
<p>  ShapeDrawable对于Xml的shape标签，在实际开发中我们经常将其作为背景图片使用，因为ShapeDrawable可以帮助我们通过颜色来构造图片，也可以构造渐变效果的图片，总之，ShapeDrawable足矣满足我们大部分特殊需求下面我们说说其使用方法：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span></span><br><span class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:shape</span>=<span class="string">[</span>"<span class="attr">rectangle</span>" | "<span class="attr">oval</span>" | "<span class="attr">line</span>" | "<span class="attr">ring</span>"] &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span></span><br><span class="line">        <span class="attr">android:radius</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:topLeftRadius</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:topRightRadius</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:bottomLeftRadius</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:bottomRightRadius</span>=<span class="string">"integer"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span></span><br><span class="line">        <span class="attr">android:angle</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:centerX</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:centerY</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:centerColor</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:endColor</span>=<span class="string">"color"</span></span><br><span class="line">        <span class="attr">android:gradientRadius</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:startColor</span>=<span class="string">"color"</span></span><br><span class="line">        <span class="attr">android:type</span>=<span class="string">[</span>"<span class="attr">linear</span>" | "<span class="attr">radial</span>" | "<span class="attr">sweep</span>"]</span><br><span class="line">        <span class="attr">android:usesLevel</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"] /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">padding</span></span><br><span class="line">        <span class="attr">android:left</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:top</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:right</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:bottom</span>=<span class="string">"integer"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">size</span></span><br><span class="line">        <span class="attr">android:width</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:height</span>=<span class="string">"integer"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span></span><br><span class="line">        <span class="attr">android:color</span>=<span class="string">"color"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span></span><br><span class="line">        <span class="attr">android:width</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:color</span>=<span class="string">"color"</span></span><br><span class="line">        <span class="attr">android:dashWidth</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:dashGap</span>=<span class="string">"integer"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>  从代码中我们可以看出Shape的子元素包括、<gradient>、<padding>、<size>、<solid>、<stroke>，我们一个个分析。<br>android:shape<br>  这个属性表示图像的形状，可以是rectangle（矩形）、oval（椭圆）、line（横线）、ring（圆环）。默认为rectangle。<br>这里对于ring值还有几个相关的属性：<br>属性     含义<br>android:innerRadius     圆环的半径与android:innerRadiusRatio同时存在时，以android:innerRadius 为准<br>android:innerRadiusRatio     内半径占整个Drawable宽度的比例，默认值为9.如果为n，那么半径=宽度/n<br>android:thickness     圆环的厚度，即外半径减去内半径的大小与android：thicknessRatio同时存在时以android:thickness为准<br>android：thicknessRatio     厚度占整个Drawable宽度比例，默认值为3，如果为n，那么厚度=宽度/n<br>android:useLevel     一般都应该使用false，否则可能无法达到预期显示效果，除非它被当做LevelListDrawable来使用。</stroke></solid></size></padding></gradient></p>
<p><corners><br>  指定边角的半径，数值越大角越圆，数值越小越趋近于直角，参数为：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">corners</span></span><br><span class="line"><span class="attr">android:radius</span>=<span class="string">"integer"</span></span><br><span class="line"><span class="attr">android:topLeftRadius</span>=<span class="string">"integer"</span></span><br><span class="line"><span class="attr">android:topRightRadius</span>=<span class="string">"integer"</span></span><br><span class="line"><span class="attr">android:bottomLeftRadius</span>=<span class="string">"integer"</span></span><br><span class="line"><span class="attr">android:bottomRightRadius</span>=<span class="string">"integer"</span> /&gt;</span></span><br></pre></td></tr></table></figure></corners></p>
<p>   Android:radius直接指定4个角的半径，另外4个属性可以单独设置4个角的角度.</p>
<p><gradient><br>  设置颜色渐变与<solid>为互斥标签，因为solid表示纯色填充，而gradient表示渐变填充。<br>属性     含义<br>android:angle     渐变的角度，默认为0，其值务必为45°的倍数，0表示从左到右，90表示从下到上。<br>android:centerX     渐变中心点的横坐标<br>android:centerY     渐变的中心点的纵坐标，渐变中心点会影响渐变的具体效果。<br>android:startColor     渐变的开始颜色<br>android:centerColor     渐变的中间颜色<br>android:endColor     渐变的结束颜色<br>android:gradientRadius     渐变的半径，当android:type=”radial”有效<br>android:useLevel     一般为false<br>android:type     渐变类别，linear(线性)为默认值，radial（径内渐变），sweep（扫描渐变）</solid></gradient></p>
<p>  angle=0和angle=90的区别(都为线性渐变)：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_3.png" alt="picture1"><br>  linear(线性)为默认值，radial（径内渐变），sweep（扫描渐变）区别如下：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_4.png" alt="picture1"><br>  到这里我们利用前面的介绍的知识点来实现一个环形进度圈的案例，我们将shape属性设置为ring（圆环），然后再设置其内半径以及环的厚度，并设置渐变色调，shape_drawable.xml代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:innerRadius</span>=<span class="string">"20dp"</span></span><br><span class="line">    <span class="attr">android:shape</span>=<span class="string">"ring"</span></span><br><span class="line">    <span class="attr">android:thickness</span>=<span class="string">"8dp"</span></span><br><span class="line">    <span class="attr">android:useLevel</span>=<span class="string">"false"</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span> <span class="attr">android:angle</span>=<span class="string">"0"</span></span><br><span class="line">        <span class="attr">android:startColor</span>=<span class="string">"@color/normal"</span></span><br><span class="line">        <span class="attr">android:centerColor</span>=<span class="string">"#5027844F"</span></span><br><span class="line">        <span class="attr">android:endColor</span>=<span class="string">"#fff"</span></span><br><span class="line">        <span class="attr">android:useLevel</span>=<span class="string">"false"</span></span><br><span class="line">        <span class="attr">android:type</span>=<span class="string">"sweep"</span></span><br><span class="line">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>效果如下：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_5.png" alt="picture1"><br>接着，我们将该自定义环形圈设置给一个旋转动画，并利用该旋转动画自定义成一个环形进度圈的style，最后将该自定义的style赋值给Progress组件。代码如下：<br>自定义旋转动画progress_rotate.xml：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">rotate</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:drawable</span>=<span class="string">"@drawable/shape_drawable"</span></span><br><span class="line">    <span class="attr">android:pivotX</span>=<span class="string">"50%"</span></span><br><span class="line">    <span class="attr">android:pivotY</span>=<span class="string">"50%"</span></span><br><span class="line">    <span class="attr">android:fromDegrees</span>=<span class="string">"0"</span></span><br><span class="line">    <span class="attr">android:toDegrees</span>=<span class="string">"360"</span></span><br><span class="line">    &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rotate</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>自定义Progress的style：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"CustomProgressStyle"</span> &gt;</span><span class="xml"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:indeterminateDrawable"</span>&gt;</span>@drawable/progress_rotate<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:minWidth"</span>&gt;</span>72dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:maxWidth"</span>&gt;</span>72dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:minHeight"</span>&gt;</span>72dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:maxHeight"</span>&gt;</span>72dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>应用到Progress组件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ProgressBar</span></span><br><span class="line">     <span class="attr">android:layout_width</span>=<span class="string">"100dp"</span></span><br><span class="line">     <span class="attr">android:layout_height</span>=<span class="string">"100dp"</span></span><br><span class="line">     <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></span><br><span class="line">     <span class="attr">style</span>=<span class="string">"@style/CustomProgressStyle"</span></span><br><span class="line">     <span class="attr">android:indeterminateDuration</span>=<span class="string">"700"</span></span><br><span class="line">     /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>效果如下：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_6.gif" alt="picture1"></p>
<p><solid><br>  表示纯色填充，通过android:color设置颜色即可。</solid></p>
<p><stroke><br>描述边框，属性如下：<br>属性     含义<br>android:width     描述边框的宽度，数值越大，越边框越厚<br>android:color     边框的颜色<br>android:dashWidth     组成虚线的线段宽度<br>android:dashGap     组成虚线的线段之间的间隔，间隔越大，虚线看起的间隙就越大</stroke></p>
<p>  有点要明白的是android:dashWidth和android:dashGap有任意一个为0，则虚线无法预期显示。</p>
<p><padding><br>  表示内容或子标签边距，4个属性top、bottom、left、right，需要注意的是这个标签的作用是为内容设置与当前应用此shape的View的边距，而不是设置当前View与父元素的边距。</padding></p>
<p><size><br>  设置背景大小，width和height俩属性。一般来说这个值不是shape的最终显示大小，因为shape作为背景时会根据View的大小而填充其背景，因此Shape的大小很多时候是View的大小决定的。<br>  到这里，shapeDrawable的基本属性我们都介绍完了，下面我们来实现一个比较常见的效果，我们在微信朋友圈点赞或者发布评论时总会出现一个红色带数字的小圆圈提示，嗯，我们就来模仿一下这个效果的实现,首先我们必须把shape属性设置为oval，并设置其纯填充颜色为红色，给一个临时大小宽高大小相同（之所以称为临时大小，是因为其最终大小由使用的View决定的），这样一个圆形背景图就出现啦。代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:shape</span>=<span class="string">"oval"</span></span><br><span class="line">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#D90E0E"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">size</span> <span class="attr">android:height</span>=<span class="string">"10dp"</span> <span class="attr">android:width</span>=<span class="string">"10dp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure></size></p>
<p>  接着应用到我们的TextView属性中<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"30dp"</span></span><br><span class="line">    <span class="attr">android:layout_height</span>=<span class="string">"30dp"</span></span><br><span class="line">    <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></span><br><span class="line">    <span class="attr">android:gravity</span>=<span class="string">"center"</span></span><br><span class="line">    <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></span><br><span class="line">    <span class="attr">android:text</span>=<span class="string">"99"</span></span><br><span class="line">    <span class="attr">android:background</span>=<span class="string">"@drawable/shape_circle_number"</span></span><br><span class="line">    /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>  最终效果如下：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_7.png" alt="picture1"><br>  <br>  实际上在开发中我们经常会利用shapeDrawable来自定义出所需要的各种背景图像或者显示图片，同时也有益于减少对美工图片的依赖，另外一个好处通过自定义shapeDrawable图片会比美工图片的size小很多，这样我们就能减少不必要的size，以减轻apk的size，可谓两全其美，因此能用shapeDrawable定义图像时，应该尽量使用它。<br>4、LayerDrawable</p>
<p>  一个LayerDrawable是一个可以管理一组drawable对象的drawable。在LayerDrawable的drawable资源按照列表的顺序绘制，列表的最后一个drawable绘制在最上层。LayerDrawable对于xml的标签是<layer-list>其语法如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">layer-list</span></span><br><span class="line"><span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span></span><br><span class="line">    <span class="attr">android:drawable</span>=<span class="string">"@[package:]drawable/drawable_resource"</span></span><br><span class="line">    <span class="attr">android:id</span>=<span class="string">"@[+][package:]id/resource_name"</span></span><br><span class="line">    <span class="attr">android:top</span>=<span class="string">"dimension"</span></span><br><span class="line">    <span class="attr">android:right</span>=<span class="string">"dimension"</span></span><br><span class="line">    <span class="attr">android:bottom</span>=<span class="string">"dimension"</span></span><br><span class="line">    <span class="attr">android:left</span>=<span class="string">"dimension"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure></layer-list></p>
<p>  一个layer-list可以包含多个item，而每个item则表示一个Drawable。下面我们来说明一下item的一些属性<br>android:id<br>  资源ID，一个为这个item定义的唯一的资源ID。 使用:”@+id/name”.这样的方式。可以检索或修改这个drawable通过下面的方式：View.findViewById() or Activity.findViewById().<br>android:top<br>  Integer，Drawable相对于View的顶部的偏移量，单位像素<br>android:right<br>  Integer，Drawable相对于View的右边的偏移量，单位像素<br>android:bottom<br>  Integer，Drawable相对于View的底部的偏移量，单位像素<br>android:left<br>  Integer，Drawable相对于View的左边的偏移量，单位像素<br>android:drawable<br>  Drawable资源，可以引用已有的drawable资源，也可在item中自定义Drawable。默认情况下，layer-list中的Drawable都会被缩放至View的大小，因此在必要的情况下，我们可以使用android:gravity属性来控制图片的展示效果，防止图片变形或者被过度拉伸。<br>  下面我们来利用layer-list的叠层效果实现一个文本输入框的底部横线背景。<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_8.png" alt="picture1"><br>xml 代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"@color/colorAccent"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:bottom</span>=<span class="string">"6dp"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#ffffff"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:bottom</span>=<span class="string">"2dp"</span></span><br><span class="line">          <span class="attr">android:left</span>=<span class="string">"2dp"</span></span><br><span class="line">          <span class="attr">android:right</span>=<span class="string">"2dp"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#ffffff"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>  应用到EditText上的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;EditText                                        </span><br><span class="line">  android:layout_width=&quot;200dp&quot;                 </span><br><span class="line">  android:layout_height=&quot;wrap_content&quot;         </span><br><span class="line">  android:layout_centerInParent=&quot;true&quot;         </span><br><span class="line">  android:background=&quot;@drawable/layer_drawable&quot;</span><br><span class="line">  /&gt;</span><br></pre></td></tr></table></figure></p>
<p>  上面代码比较简单，我们就不过的分析，接着我们再利用<layer-list>标签来实现一个带阴影的圆角矩形，layer_list_drawable_2.xml代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 灰色阴影 内容距离左边2dp，距离顶部4dp--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span><br><span class="line">        <span class="attr">android:left</span>=<span class="string">"2dp"</span></span><br><span class="line">        <span class="attr">android:top</span>=<span class="string">"4dp"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"@android:color/darker_gray"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"10dp"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 白色前景 内容距离底部4dp 右边2dp--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span><br><span class="line">        <span class="attr">android:bottom</span>=<span class="string">"4dp"</span></span><br><span class="line">        <span class="attr">android:right</span>=<span class="string">"2dp"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#FFFFFF"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"10dp"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure></layer-list></p>
<p>  效果如下：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_9.png" alt="picture1"><br>  <br>当然我们也可以在代码中实现这里仅给出示例，不深究，还是建议采用xml的方式定义<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Bitmap bitmap=BitmapFactory.decodeResource(getResources(), R.drawable.image1);</span><br><span class="line">Drawable[] drawables=<span class="keyword">new</span> Drawable[<span class="number">3</span>];</span><br><span class="line">drawables[<span class="number">0</span>]=<span class="keyword">new</span> BitmapDrawable(bitmap);</span><br><span class="line">drawables[<span class="number">1</span>]=<span class="keyword">new</span> BitmapDrawable(bitmap);</span><br><span class="line">drawables[<span class="number">2</span>]=<span class="keyword">new</span> BitmapDrawable(bitmap);</span><br><span class="line">LayerDrawable layer=<span class="keyword">new</span> LayerDrawable(drawables);</span><br><span class="line"><span class="comment">//设置图层边界距离</span></span><br><span class="line">layer.setLayerInset(<span class="number">0</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">layer.setLayerInset(<span class="number">1</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">layer.setLayerInset(<span class="number">2</span>, <span class="number">60</span>, <span class="number">60</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">ImageView imageView=(ImageView)findViewById(R.id.imgView);</span><br><span class="line">imageView.setImageDrawable(layer);</span><br></pre></td></tr></table></figure></p>
<p>  这样我们的带阴影的圆角矩形就出来啦，可以将其作为其他View的背景使用，美工也就不用提供类似的图了，到这里我们应该已经体会带巧用各种Drawable的威力了。<br>5、StateListDrawable</p>
<p>  StateListDrawable对于xml的<selector>标签，这个标签可以说是我们最常用的标签了，在开发中，有时候我们需要一个View在点击前显示某种状态，而在点击后又切换到另外一种状态，这时我们就需要利用<selector>标签来实现啦。如下案例，我们在点击输入邮件地址前文本框底线是灰色，而在点击后文本框底线就变成蓝色了，这也是<selector>标签的应用之一。<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_10.gif" alt="picture1"><br>  StateListDrawable本身也是表示Drawable的集合，每个Drawable就对于View的一种状态，如上面的灰色底线和蓝色底线对应着View的两种V不同时期的状态，因此我们经常使用StateListDrawable来设置View的背景，以便在不同状态下显示不同的效果，从而获得更优的用户体验。其主要语法如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:constantSize</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">    <span class="attr">android:dither</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">    <span class="attr">android:variablePadding</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"] &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span><br><span class="line">        <span class="attr">android:drawable</span>=<span class="string">"@[package:]drawable/drawable_resource"</span></span><br><span class="line">        <span class="attr">android:state_pressed</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">        <span class="attr">android:state_focused</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">        <span class="attr">android:state_hovered</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">        <span class="attr">android:state_selected</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">        <span class="attr">android:state_checkable</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">        <span class="attr">android:state_checked</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">        <span class="attr">android:state_enabled</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">        <span class="attr">android:state_activated</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"]</span><br><span class="line">        <span class="attr">android:state_window_focused</span>=<span class="string">[</span>"<span class="attr">true</span>" | "<span class="attr">false</span>"] /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure></selector></selector></selector></p>
<p>item的属性介绍如下：<br>属性     含义<br>android:drawable     该状态下要显示的图像，可以是Drawable也可以是图片<br>android:state_pressed     表示是否处于被按下状态<br>android:state_focused     表示是否已得到焦点状态<br>android:state_hovered     表示光标是否停留在View的自身大小范围内的状态<br>android:state_selected     表示是否处于被选中状态<br>android:state_checkable     表示是否处于可勾选状态<br>android:state_checked     表示是否处于已勾选状态，一般用于CheckBox<br>android:state_enabled     表示是否处于可用状态<br>android:state_active     表示是否处于激活状态<br>android:state_window_focused     表示是否窗口已得到焦点状态</p>
<p>selector标签的属性含义如下：<br>android:constantSize<br>  StateListDrawable的固有大小是否随着其状态改变而改变，因为在状态改变后，StateListDrawable会切换到别的Drawable，而不同的Drawable其大小可能不一样。true表示大小不变，这时其固有大小是内容所有Drawable的固有大小的最大值。false则会随着状态改变而改变，默认值为false<br>android:variablePadding<br>  表示 StateListDrawable的padding是否随状态的改变而改变，默认值为false，一般建议设置为false就行。<br>android:dither<br>  是否开启抖动效果，开启后可使高质量的图片在低质量的屏幕上仍然有较好的显示效果，一般建议开启，设置为true。<br>接下来我们来看一个例子，按钮点击前后状态改变。代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--获取焦点状态--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span><br><span class="line">    <span class="attr">android:state_focused</span>=<span class="string">"true"</span></span><br><span class="line">    <span class="attr">android:drawable</span>=<span class="string">"@color/color_state"</span></span><br><span class="line">    /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--按下状态--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_pressed</span>=<span class="string">"true"</span></span><br><span class="line">    <span class="attr">android:drawable</span>=<span class="string">"@color/color_state"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--默认状态下--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@color/normal"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>接着应用到button上：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span><br><span class="line">       <span class="attr">android:padding</span>=<span class="string">"8dp"</span></span><br><span class="line">       <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span><br><span class="line">       <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span><br><span class="line">       <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></span><br><span class="line">       <span class="attr">android:text</span>=<span class="string">"Selector_State"</span></span><br><span class="line">       <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></span><br><span class="line">       <span class="attr">android:background</span>=<span class="string">"@drawable/selector_drawable"</span></span><br><span class="line">       /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>效果如下：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_11.gif" alt="picture1"><br>  上面是通过颜色定义不同状态下的显示 效果，当然我们也可以利用shapeDrawable定义各种背景图像然后应用到StateListDrawable中，下面我们定义两个不同状态下的圆角矩形，并应用到button上<br>shape_drawable_for_btn_normal.xml代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:shape</span>=<span class="string">"rectangle"</span></span><br><span class="line">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"@color/normal"</span>&gt;</span><span class="tag">&lt;/<span class="name">solid</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"8dp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>shape_drawable_for_btn_press.xml代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:shape</span>=<span class="string">"rectangle"</span></span><br><span class="line">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"@color/color_state"</span>&gt;</span><span class="tag">&lt;/<span class="name">solid</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"8dp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>selector_for_btn.xml代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--获取焦点状态--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span><br><span class="line">        <span class="attr">android:state_focused</span>=<span class="string">"true"</span></span><br><span class="line">        <span class="attr">android:drawable</span>=<span class="string">"@drawable/shape_drawable_for_btn_press"</span></span><br><span class="line">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--按下状态--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_pressed</span>=<span class="string">"true"</span></span><br><span class="line">        <span class="attr">android:drawable</span>=<span class="string">"@drawable/shape_drawable_for_btn_press"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--默认状态下--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/shape_drawable_for_btn_normal"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>应用到button上</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span><br><span class="line">       <span class="attr">android:padding</span>=<span class="string">"8dp"</span></span><br><span class="line">       <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span><br><span class="line">       <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span><br><span class="line">       <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></span><br><span class="line">       <span class="attr">android:text</span>=<span class="string">"Selector_State"</span></span><br><span class="line">       <span class="attr">android:textColor</span>=<span class="string">"#fff"</span></span><br><span class="line">       <span class="attr">android:background</span>=<span class="string">"@drawable/selector_for_btn"</span></span><br><span class="line">       /&gt;</span></span><br></pre></td></tr></table></figure>
<p>最终效果如下：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_11.gif" alt="picture1"><br>最后给出一个通过代码实现的案例给大家参考（建议尽量使用xml定义，代码定义比较复杂）：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 设置Selector。 */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> StateListDrawable <span class="title">newSelector</span><span class="params">(Context context, <span class="keyword">int</span> idNormal, <span class="keyword">int</span> idPressed, <span class="keyword">int</span> idFocused,</span><br><span class="line">                                                <span class="keyword">int</span> idUnable)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//相当于&lt;selector&gt;标签</span></span><br><span class="line">        StateListDrawable bg = <span class="keyword">new</span> StateListDrawable();</span><br><span class="line">        Drawable normal = context.getResources().getDrawable(R.drawable.shape_drawable_for_btn_normal);</span><br><span class="line">        Drawable pressed = context.getResources().getDrawable(R.drawable.shape_drawable_for_btn_press);</span><br><span class="line">        Drawable focused =context.getResources().getDrawable(R.drawable.shape_drawable_for_btn_press);</span><br><span class="line">        Drawable unable = context.getResources().getDrawable(R.drawable.shape_drawable_for_btn_unable);</span><br><span class="line">        <span class="comment">//设置每种状态下的Drawable显示</span></span><br><span class="line">        <span class="comment">// View.PRESSED_ENABLED_STATE_SET</span></span><br><span class="line">        bg.addState(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123; android.R.attr.state_pressed, android.R.attr.state_enabled &#125;, pressed);</span><br><span class="line">        <span class="comment">// View.ENABLED_FOCUSED_STATE_SET</span></span><br><span class="line">        bg.addState(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123; android.R.attr.state_enabled, android.R.attr.state_focused &#125;, focused);</span><br><span class="line">        <span class="comment">// View.ENABLED_STATE_SET</span></span><br><span class="line">        bg.addState(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123; android.R.attr.state_enabled &#125;, normal);</span><br><span class="line">        <span class="comment">// View.FOCUSED_STATE_SET</span></span><br><span class="line">        bg.addState(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123; android.R.attr.state_focused &#125;, focused);</span><br><span class="line">        <span class="comment">// View.WINDOW_FOCUSED_STATE_SET</span></span><br><span class="line">        bg.addState(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123; android.R.attr.state_window_focused &#125;, unable);</span><br><span class="line">        <span class="comment">// View.EMPTY_STATE_SET</span></span><br><span class="line">        bg.addState(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;&#125;, normal);</span><br><span class="line">        <span class="keyword">return</span> bg;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>6、LevelListDrawable</p>
<p>  LevelListDrawable对应于<level-list>标签，也表示一个Drawable的集合，但集合中的每个Drawable都一个等级。根据不同等级，LevelListDrawable会切换到相应的Drawable。语法如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">level-list</span></span><br><span class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span><br><span class="line">        <span class="attr">android:drawable</span>=<span class="string">"@drawable/drawable_resource"</span></span><br><span class="line">        <span class="attr">android:maxLevel</span>=<span class="string">"integer"</span></span><br><span class="line">        <span class="attr">android:minLevel</span>=<span class="string">"integer"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">level-list</span>&gt;</span></span><br></pre></td></tr></table></figure></level-list></p>
<p>属性说明如下：<br>属性     含义<br>android:drawable     该等级下需要展示的图片<br>android:maxLevel     该项所允许的最大level<br>android:minLevel     该项所允许的最小level</p>
<p>  实际上我们也很容易知道<level-list>标签中的每个Item各表示一个Drawable，并有与之对应的等级，而等级则是由android:maxLevel和android:minLevel所决定的，其等级范围是0-10000，最小为0，默认值，最大则为10000，还是一样的做法，先来看一个案例：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">level-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/image4"</span></span><br><span class="line">        <span class="attr">android:maxLevel</span>=<span class="string">"0"</span></span><br><span class="line">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/image1"</span></span><br><span class="line">          <span class="attr">android:maxLevel</span>=<span class="string">"1"</span></span><br><span class="line">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/image2"</span></span><br><span class="line">        <span class="attr">android:maxLevel</span>=<span class="string">"2"</span></span><br><span class="line">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/image3"</span></span><br><span class="line">        <span class="attr">android:maxLevel</span>=<span class="string">"3"</span></span><br><span class="line">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">level-list</span>&gt;</span></span><br></pre></td></tr></table></figure></level-list></p>
<p>  我们定义了4个item，等级分别为0，1，2，3，它们都有与之对应的Drawable，然后我们在java代码中实现一个效果，每过2秒更好一个不同等级的图片，代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zejian.drawble;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.os.Message;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ImageView imageView;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Handler handler = <span class="keyword">new</span> Handler()&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(msg.what==<span class="number">1</span>)&#123;</span><br><span class="line">                imageView.getDrawable().setLevel(<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(msg.what==<span class="number">2</span>)&#123;</span><br><span class="line">                imageView.getDrawable().setLevel(<span class="number">2</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(msg.what==<span class="number">3</span>)&#123;</span><br><span class="line">                imageView.getDrawable().setLevel(<span class="number">3</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        imageView=(ImageView)findViewById(R.id.image);</span><br><span class="line">        imageView.setImageResource(R.drawable.level_list_drawable);</span><br><span class="line">        imageView.setImageLevel(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">            handler.sendEmptyMessageDelayed(i,i*<span class="number">2000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>实现效果如下：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_13.gif" alt="picture1"><br>  实际上我们还可以设置等级范围，当等级在某个范围内时去显示对应范围内的图片，这也是可以的。这个比较简单，这里就不演示了哈。<br>  7、TransitionDrawable</p>
<p>  很多时候我们在实现渐变的动画效果时，都会使用到animation，但实际上我们有既简单又完美的解决方法，没错，它就是TransitionDrawable啦，TransitionDrawable用于实现两个Drawable之间的淡入淡出的效果，它对应的是<transition&gt标签;其语法如下： <figure="" class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">transition</span></span><br><span class="line"><span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span><br><span class="line">        <span class="attr">android:drawable</span>=<span class="string">"@[package:]drawable/drawable_resource"</span></span><br><span class="line">        <span class="attr">android:id</span>=<span class="string">"@[+][package:]id/resource_name"</span></span><br><span class="line">        <span class="attr">android:top</span>=<span class="string">"dimension"</span></span><br><span class="line">        <span class="attr">android:right</span>=<span class="string">"dimension"</span></span><br><span class="line">        <span class="attr">android:bottom</span>=<span class="string">"dimension"</span></span><br><span class="line">        <span class="attr">android:left</span>=<span class="string">"dimension"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></transition&gt标签;其语法如下：></p>
<p>  语法中的属性比较简单，其中 Android:top，android:bottom，android:left，android:right分别表示Drawable四周的偏移量。<br>android:id<br>  资源ID,drawable资源的唯一标识。使用”@+id/name”方式来给这个item定义一个新的资源ID。可以使用View.findViewById()或者 Activity.findViewById()等方式检索和修改这个item。<br>同样，我们来看一个实例：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/image1"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/image2"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>引用如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageView</span>                                           </span><br><span class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/image"</span>                          </span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span>              </span><br><span class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>             </span><br><span class="line">    <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span>             </span><br><span class="line">    <span class="attr">android:background</span>=<span class="string">"@drawable/transition_drawable"</span>      </span><br><span class="line">/&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>  通过它的startTransition和reverseTransition方法实现淡入淡出效果，代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TransitionDrawable drawable= (TransitionDrawable) imageView.getBackground();</span><br><span class="line">drawable.startTransition(<span class="number">4000</span>);</span><br></pre></td></tr></table></figure></p>
<p>  如果在imageView设置的src属性<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageView</span>                                           </span><br><span class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/image"</span>                          </span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span>              </span><br><span class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>             </span><br><span class="line">    <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span>             </span><br><span class="line">    <span class="attr">android:src</span>=<span class="string">"@drawable/transition_drawable"</span>      </span><br><span class="line">/&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>  代码控制为：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TransitionDrawable drawable= (TransitionDrawable) imageView.getDrawable();</span><br><span class="line">drawable.startTransition(<span class="number">4000</span>);</span><br></pre></td></tr></table></figure></p>
<p>  最终效果：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_14.gif" alt="picture1"><br>最后我们给出代码实现的方式，比较简单，这里不过多分析：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ImageView imageView= (ImageView) findViewById(R.id.tranImage);</span><br><span class="line"></span><br><span class="line">Bitmap bitmap1= BitmapFactory.decodeResource(getResources(), R.drawable.image1);</span><br><span class="line">Bitmap bitmap2= BitmapFactory.decodeResource(getResources(), R.drawable.image2);</span><br><span class="line"><span class="keyword">final</span> TransitionDrawable td = <span class="keyword">new</span> TransitionDrawable(<span class="keyword">new</span> Drawable[] &#123;  <span class="keyword">new</span> BitmapDrawable(getResources(), bitmap1),</span><br><span class="line">        <span class="keyword">new</span> BitmapDrawable(getResources(), bitmap2) &#125;);</span><br><span class="line">imageView.setImageDrawable(td);</span><br><span class="line">td.startTransition(<span class="number">4000</span>);</span><br></pre></td></tr></table></figure></p>
<p>8、InsetDrawable</p>
<p>  有时候我们可能需要为一个全屏的LinearLayout布局指定背景图，但我们不想让背景图充满屏幕，这时我们就需要使用到InsetDrawable了，InsetDrawable对应<inset>标签，它可以将其他Drawable内嵌到自己当中，并可以在四周预留出一定的间距。当我们希望View的背景比实际区域小时，就可以采用InsetDrawable来实现，个人认为这个效果并没有什么特殊之处，因为layerDrawable也是可以达到相同的预期效果的。其语法如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">inset</span></span><br><span class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:drawable</span>=<span class="string">"@drawable/drawable_resource"</span></span><br><span class="line">    <span class="attr">android:insetTop</span>=<span class="string">"dimension"</span></span><br><span class="line">    <span class="attr">android:insetRight</span>=<span class="string">"dimension"</span></span><br><span class="line">    <span class="attr">android:insetBottom</span>=<span class="string">"dimension"</span></span><br><span class="line">    <span class="attr">android:insetLeft</span>=<span class="string">"dimension"</span> /&gt;</span></span><br></pre></td></tr></table></figure></inset></p>
<p>属性解释：<br>属性     含义<br>android:insetTop     图像距离上边的距离<br>android:insetRight     图像距离右边的距离<br>android:insetBottom     图像距离底边的距离<br>android:insetLeft     图像距离左边的距离</p>
<p>  直接看个例子吧，代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">inset</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:insetBottom</span>=<span class="string">"10dp"</span></span><br><span class="line">    <span class="attr">android:drawable</span>=<span class="string">"@drawable/transition_bg_1"</span></span><br><span class="line">    <span class="attr">android:insetTop</span>=<span class="string">"10dp"</span></span><br><span class="line">    <span class="attr">android:insetLeft</span>=<span class="string">"10dp"</span></span><br><span class="line">    <span class="attr">android:insetRight</span>=<span class="string">"10dp"</span></span><br><span class="line">    &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">inset</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>  直接作为根布局的背景<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span><br><span class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span><br><span class="line">    <span class="attr">android:background</span>=<span class="string">"@drawable/inset_drawable"</span></span><br><span class="line">    <span class="attr">tools:context</span>=<span class="string">"com.zejian.drawble.MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>  效果如下：<br>  <img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_15.png" alt="picture1"><br>9、ScaleDrawable</p>
<p>  ScaleDrawable对应<scale>标签，主要基于当前的level，对指定的Drawable进行缩放操作。有点需要特别注意的是我们如果定义好了ScaleDrawable，要将其显示出来的话，必须给ScaleDrawable设置一个大于0小于10000的等级（级别越大Drawable显示得越大，等级为10000时就没有缩放效果了），否则将无法正常显示。我们可以看看其draw函数的源码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Drawable d = getDrawable();</span><br><span class="line">    <span class="keyword">if</span> (d != <span class="keyword">null</span> &amp;&amp; d.getLevel() != <span class="number">0</span>) &#123;</span><br><span class="line">        d.draw(canvas);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></scale></p>
<p>  很明显d.getLevel() != 0才会去把当前drawable画在画布上然后显示在屏幕上，我们知道这点后再来看看其语法：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">scale</span></span><br><span class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:drawable</span>=<span class="string">"@drawable/drawable_resource"</span></span><br><span class="line">    <span class="attr">android:scaleGravity</span>=<span class="string">[</span>"<span class="attr">top</span>" | "<span class="attr">bottom</span>" | "<span class="attr">left</span>" | "<span class="attr">right</span>" | "<span class="attr">center_vertical</span>" |</span><br><span class="line">                          "<span class="attr">fill_vertical</span>" | "<span class="attr">center_horizontal</span>" | "<span class="attr">fill_horizontal</span>" |</span><br><span class="line">                          "<span class="attr">center</span>" | "<span class="attr">fill</span>" | "<span class="attr">clip_vertical</span>" | "<span class="attr">clip_horizontal</span>"]</span><br><span class="line">    <span class="attr">android:scaleHeight</span>=<span class="string">"percentage"</span></span><br><span class="line">    <span class="attr">android:scaleWidth</span>=<span class="string">"percentage"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>android:gravity<br>  当图片小于容器尺寸时，设置此选项可以对图片经典定位，这个属性比较多，不同选项可以使用‘|’来组合使用。<br>可选项     含义<br>top     将图片放在容器顶部，不改变图片大小<br>bottom     将图片放在容器底部，不改变图片大小<br>left     将图片放在容器左侧，不改变图片大小<br>right     将图片放在容器右侧，不改变图片大小<br>center_vertical     图片竖直居中，不改变图片大小<br>fill_vertical     图片竖直方向填充容器<br>center_horizontal     图片水平居中，不改变图片大小<br>fill_horizontal     图片水平方向填充容器<br>center     使图片在水平方向和竖直方向同时居中，不改变图片大小<br>fill     图片填充容器，默认值<br>clip_vertical     竖直方向剪切，很少使用<br>clip_horizontal     水平方向剪切，很少使用</p>
<p>android:scaleHeight<br>表示Drawable的高的缩放比例，值越大，内部Drawable的高度显示得越小，例如android:scaleHeight=”70%”,那么显示时Drawable的高度只有原来的30%。<br>android:scaleWidth<br>表示Drawable的宽的缩放比例，值越大，内部Drawable的宽显示得越小，例如android:scaleWidth=”70%”,那么显示时Drawable的宽度只有原来的30%。<br>直接来看个例子呗，我们设置两组宽高分别缩放70%和30%，然后来对比一下情况<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">scale</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:drawable</span>=<span class="string">"@drawable/image1"</span></span><br><span class="line">    <span class="attr">android:scaleHeight</span>=<span class="string">"70%"</span></span><br><span class="line">    <span class="attr">android:scaleWidth</span>=<span class="string">"70%"</span></span><br><span class="line">    <span class="attr">android:scaleGravity</span>=<span class="string">"center"</span></span><br><span class="line">    &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scale</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">scale</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:drawable</span>=<span class="string">"@drawable/image1"</span></span><br><span class="line">    <span class="attr">android:scaleHeight</span>=<span class="string">"30%"</span></span><br><span class="line">    <span class="attr">android:scaleWidth</span>=<span class="string">"30%"</span></span><br><span class="line">    <span class="attr">android:scaleGravity</span>=<span class="string">"center"</span></span><br><span class="line">    &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scale</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>  必须在Java调用设置level(默认为0)的代码才可以正常显示：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ImageView scaleImage= (ImageView) findViewById(R.id.scaleImage);</span><br><span class="line">ScaleDrawable scale= (ScaleDrawable) scaleImage.getBackground();</span><br><span class="line">scale.setLevel(<span class="number">1</span>);</span><br></pre></td></tr></table></figure></p>
<p>  效果对比如下：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_16.png" alt="picture1"><br>  我们再来对比一下宽高同等缩放比例（50%）下，level对Drawable的影响效果，分别设置level等级为1，5000，10000.<br>  <img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_17.png" alt="picture1"><br>10、ClipDrawable</p>
<p>  ClipDrawable是通过设置一个Drawable的当前显示比例来裁剪出另一张Drawable，我们可以通过调节这个比例来控制裁剪的宽高，以及裁剪内容占整个View的权重，通过ClipDrawable的setLevel()方法控制显示比例，ClipDrawable的level值范围在[0,10000]，level的值越大裁剪的内容越少，当level为10000时则完全显示，而0表示完全裁剪，不可见。需要注意的是在给clip元素中android:drawable属性设置背景图片时，图片不能是9图，因为这涉及到裁剪这张图片，如果设置为九图，裁剪的实际情况会与想要的效果不一样。ClipDrawable对应xml的<clip>标签，其语法如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">clip</span></span><br><span class="line"><span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line"><span class="attr">android:drawable</span>=<span class="string">"@drawable/drawable_resource"</span></span><br><span class="line"><span class="attr">android:clipOrientation</span>=<span class="string">[</span>"<span class="attr">horizontal</span>" | "<span class="attr">vertical</span>"]</span><br><span class="line"><span class="attr">android:gravity</span>=<span class="string">[</span>"<span class="attr">top</span>" | "<span class="attr">bottom</span>" | "<span class="attr">left</span>" | "<span class="attr">right</span>" | "<span class="attr">center_vertical</span>" |</span><br><span class="line">                 "<span class="attr">fill_vertical</span>" | "<span class="attr">center_horizontal</span>" | "<span class="attr">fill_horizontal</span>" |</span><br><span class="line">                 "<span class="attr">center</span>" | "<span class="attr">fill</span>" | "<span class="attr">clip_vertical</span>" | "<span class="attr">clip_horizontal</span>"] /&gt;</span></span><br></pre></td></tr></table></figure></clip></p>
<p>  其中android:clipOrientation和android:gravity属性共同控制Drawable被裁剪的方向，其中clipOrientation表示裁剪的方向（水平和垂直两种），gravity比较复杂必须和clipOrientation一起才能起作用，同样的我们可以通过“|”来组合使用gravity的属性值。gravity属性值说明如下：<br>属性值     描述<br>top     将这个对象放在容器的顶部，不改变其大小。当clipOrientation 是”vertical”，裁剪从底部开始<br>bottom     将这个对象放在容器的底部，不改变其大小。当clipOrientation 是 “vertical”，裁剪从顶部（top）开始<br>left     将这个对象放在容器的左部，不改变其大小。当clipOrientation 是 “horizontal”，裁剪从drawable的右边（right）开始，默认值<br>right     将这个对象放在容器的右部，不改变其大小。当clipOrientation 是 “horizontal”，裁剪从drawable的左边（left）开始<br>center_vertical     将对象放在垂直中间，不改变其大小，如果clipOrientation 是 “vertical”，那么从上下同时开始裁剪<br>fill_vertical     垂直方向上不发生裁剪。（除非drawable的level是 0，才会不可见，表示全部裁剪完）<br>center_horizontal     将对象放在水平中间，不改变其大小，clipOrientation 是 “horizontal”，那么从左右两边开始裁剪<br>fill_horizontal     水平方向上不发生裁剪。（除非drawable的level是 0，才会不可见，表示全部裁剪完）<br>center     将这个对象放在水平垂直坐标的中间，不改变其大小。当clipOrientation 是 “horizontal”裁剪发生在左右。当clipOrientation是”vertical”,裁剪发生在上下。<br>fill     填充整个容器，不会发生裁剪。(除非drawable的level是 0，才会不可见，表示全部裁剪完)。<br>clip_vertical     附加选项，表示竖直方向的裁剪，很少使用<br>clip_horizontal     附加选项，表示水平方向的裁剪，很少使用</p>
<p>  ClipDrawable属性介绍完了，直接来个实战吧，<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">clip</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:drawable</span>=<span class="string">"@drawable/image1"</span></span><br><span class="line">    <span class="attr">android:clipOrientation</span>=<span class="string">"horizontal"</span></span><br><span class="line">    <span class="attr">android:gravity</span>=<span class="string">"right"</span></span><br><span class="line">    &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">clip</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>  在上面的xml中我们实现了左侧裁剪的效果，因此应将clipOrientation设置为水平方向裁剪，gravity要设置为right。然后应用到我的ImageView上代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageView</span>                                             </span><br><span class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/clipImage"</span>                        </span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span>                </span><br><span class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>               </span><br><span class="line">    <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span>               </span><br><span class="line">    <span class="attr">android:background</span>=<span class="string">"@drawable/clip_drawable"</span>       </span><br><span class="line">    /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>  接着在代码中设置ClipDrawable的等级，代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">ImageView clipImage= (ImageView) findViewById(R.id.clipImage);</span><br><span class="line">ClipDrawable clip= (ClipDrawable) clipImage.getBackground();</span><br><span class="line">clip.setLevel(<span class="number">6000</span>);</span><br></pre></td></tr></table></figure></p>
<p>  因为这里我们在xml引用时设置的是背景图所以使用clipImage.getBackground()，如果在xml引用时使用的是src，那么就使用clipImage.getDrawable()即可。前面我们已经提到过，ClipDrawable的等级范围是[0,10000]，而且level越大裁剪区域越少，当level=10000时，表示不裁剪，我们在这里设置了level为6000则表示裁剪40%的区域，效果如下：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_18.png" alt="picture1"><br>  最后我们来实现一个案例，在实际开发中经常会使用到动画来实现一些特殊效果，比如我们可能需要实现一个徐徐展开的图片，这时我们的ClipDrawable就派上用场了，接着我们就是利用ClipDrawable来实现一个拥有徐徐展开效果的图片<br>思路：<br>  因为ClipDrawable的setLevel(int level)可以控制截取图片的部分，因此我们可以设置一个定时器，让程序每隔一段时间就调用ClipDrawable的setLevel(int level)方法即可实现图片徐徐展开效果。<br>  我们首先来实现一个clip_drawable_image.xml，并设置clipOrientation=”horizontal”，即水平剪切，以及设置gravity=”center”，即左右同时裁剪，代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">clip</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:drawable</span>=<span class="string">"@drawable/image1"</span></span><br><span class="line">    <span class="attr">android:clipOrientation</span>=<span class="string">"horizontal"</span></span><br><span class="line">    <span class="attr">android:gravity</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">clip</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>接着在activity_clip.xml文件布局中引用：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span><br><span class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span><br><span class="line">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span><br><span class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/image"</span></span><br><span class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span><br><span class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span><br><span class="line">        <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></span><br><span class="line">        <span class="attr">android:scaleType</span>=<span class="string">"fitStart"</span></span><br><span class="line">        <span class="attr">android:src</span>=<span class="string">"@drawable/clip_drawable_image"</span></span><br><span class="line">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>代码调用如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zejian.drawble;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.graphics.drawable.ClipDrawable;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.os.Message;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Timer;</span><br><span class="line"><span class="keyword">import</span> java.util.TimerTask;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by zejian</span><br><span class="line"> * Time 16/8/19.</span><br><span class="line"> * Description:</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Clip_Activity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> IS_CONTUNUE=<span class="number">0x22</span>;</span><br><span class="line">    <span class="keyword">private</span>  ClipDrawable drawable;</span><br><span class="line">    <span class="keyword">private</span>  ImageView imageView;</span><br><span class="line">    Timer timer = <span class="keyword">new</span> Timer();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> Handler handler = <span class="keyword">new</span> Handler() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (msg.what == IS_CONTUNUE) &#123;</span><br><span class="line">                <span class="comment">/**setlevel()设置图片截取的大小</span><br><span class="line">                 * 修改ClipDrawable的level值，level值为0--10000；</span><br><span class="line">                 * 10000：截取图片大小为空白，0：截取图片为整张图片；</span><br><span class="line">                 */</span></span><br><span class="line">                drawable.setLevel(drawable.getLevel() + <span class="number">200</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_clip);</span><br><span class="line"></span><br><span class="line">        imageView = (ImageView) findViewById(R.id.image);</span><br><span class="line">        <span class="comment">//获取图片所显示的ClipDrawable对象</span></span><br><span class="line">        drawable = (ClipDrawable) imageView.getDrawable();</span><br><span class="line">        <span class="comment">//定时器</span></span><br><span class="line">        timer.schedule(<span class="keyword">new</span> TimerTask() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Message msg = <span class="keyword">new</span> Message();</span><br><span class="line">                msg.what = IS_CONTUNUE;</span><br><span class="line">                handler.sendMessage(msg);</span><br><span class="line">                <span class="keyword">if</span> (drawable.getLevel() &gt;= <span class="number">10000</span>) &#123;</span><br><span class="line">                    timer.cancel();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="number">0</span>, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>效果如下：<br><img src="http://7xtazt.com1.z0.glb.clouddn.com/android_drawable_19.gif" alt="picture1"><br>11、ColorDrawable</p>
<p>  ColorDrawable 是最简单的Drawable，它实际上是代表了单色可绘制区域，它包装了一种固定的颜色，当ColorDrawable被绘制到画布的时候会使用颜色填充Paint，在画布上绘制一块单色的区域。 在xml文件中对应<color>标签，它只有一个android:color属性，通过它来决定ColorDrawable的颜色。<br>xml实现如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xmlversion="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">color</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">  <span class="attr">android:color</span>=<span class="string">"@color/normal"</span></span><br><span class="line">/&gt;</span></span><br></pre></td></tr></table></figure></color></p>
<p>  也可以使用代码实现，注意传入的颜色值为16进制的数字：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ColorDrawable cd = <span class="keyword">new</span> ColorDrawable(<span class="number">0xff000000</span>);</span><br><span class="line">ImageView iv = (ImageView)findViewById(...);</span><br><span class="line">iv.setImageDrawable(cd);</span><br></pre></td></tr></table></figure></p>
<p>12、GradientDrawable</p>
<p>  GradientDrawable 表示一个渐变区域，可以实现线性渐变、发散渐变和平铺渐变效果，实际上这个我们在上一篇的shapeDrawable中就已经分析过了,忘了可以回头复习一下哈~，其对应的标签为<gtadient>一般都是配置shapeDrawable来使用，为其实现渐变颜色。这里给出简单案例如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:shape</span>=<span class="string">"rectangle"</span></span><br><span class="line">    &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span> <span class="attr">android:angle</span>=<span class="string">"90"</span></span><br><span class="line">        <span class="attr">android:startColor</span>=<span class="string">"@color/colorPrimary"</span></span><br><span class="line">        <span class="attr">android:centerColor</span>=<span class="string">"#fff"</span></span><br><span class="line">        <span class="attr">android:endColor</span>=<span class="string">"@color/color_state"</span></span><br><span class="line">        <span class="attr">android:type</span>=<span class="string">"linear"</span></span><br><span class="line">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure></gtadient></p>
<p>   当然GradientDrawable也可以作为View的背景图，案例代码实现如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分别为开始颜色，中间夜色，结束颜色</span></span><br><span class="line"><span class="keyword">int</span> colors[] = &#123; <span class="number">0xff255779</span> , <span class="number">0xff3e7492</span>, <span class="number">0xffa6c0cd</span> &#125;;</span><br><span class="line">GradientDrawable gd = <span class="keyword">new</span> GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, colors);</span><br></pre></td></tr></table></figure></p>
<p>  最后设置给View的背景图即可。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setBackgroundDrawable(gd);</span><br></pre></td></tr></table></figure></p>
<p>  代码实现GradientDrawable还可以设置边框，圆角，边框宽度等等，这里我们就不深究了，感兴趣可以自行研究一下。 </p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2016/08/25/android_drawable/">(转)领略千变万化的Android Drawable</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">剑客爱编程</a></p>
        <p><span>发布时间:</span>2016-08-25, 23:57:20</p>
        <p><span>最后更新:</span>2016-08-25, 23:57:08</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2016/08/25/android_drawable/" title="(转)领略千变万化的Android Drawable">https://iskylove.github.io/2016/08/25/android_drawable/</a>
            <span class="copy-path" data-clipboard-text="原文: https://iskylove.github.io/2016/08/25/android_drawable/　　作者: 剑客爱编程" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2016/11/05/android_aop_des/">
                    【翻译】Android中的AOP编程
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2016/08/24/website_share/">
                    技术网站分享(持续更新中~~)
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Drawable的简述"><span class="toc-number">1.</span> <span class="toc-text">Drawable的简述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#千变万化的Drawable"><span class="toc-number">2.</span> <span class="toc-text">千变万化的Drawable</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#BitmapDrawable"><span class="toc-number">2.1.</span> <span class="toc-text">BitmapDrawable</span></a></li></ol></li></ol>
</div>
<style>
    .left-col .switch-btn {
        display: none;
    }
    .left-col .switch-area {
        display: none;
    }
</style>

<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">
<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }

    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
            $(".switch-btn, .switch-area").fadeOut(300);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
            $(".switch-btn, .switch-area").fadeIn(500);
        }
    })

    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
        $(".switch-btn, .switch-area").show();
    }
</script>





    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"(转)领略千变万化的Android Drawable　| 剑客爱编程　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/11/05/android_aop_des/" title="上一篇: 【翻译】Android中的AOP编程">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2016/08/24/website_share/" title="下一篇: 技术网站分享(持续更新中~~)">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/03/05/java_leakcanary_androidwatchexecutor/">LeakCanary源码学习--内存泄露观察策略</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/05/android_addIdleHandler/">android addIdleHandler 空闲线程学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/05/android_Memory_Management_in_Android/">(转)Hunting Your Leaks, Memory Management in Android</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/05/java_rxjava/">Rxjava源码学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/05/java_reference/">java Reference 学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/05/java_leakcanary/">LeakCanary源码学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/05/java_referencequeue/">深入理解ReferenceQueue GC finalize Reference</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/05/android_patch_fix/"><转>漫谈Android 增量更新</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/05/java_javassist/">(转)JAVA 字节码操作利器javassist</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/05/android_aop_des/">【翻译】Android中的AOP编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/25/android_drawable/">(转)领略千变万化的Android Drawable</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/website_share/">技术网站分享(持续更新中~~)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/android_viewpager/">android ViewPager控件深入了解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/24/android_material_design/">android material design 学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/09/java_datastructures_alogorithm_3/">(数据结构与算法分析笔记])第四章  树</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/08/java_datastructures_alogorithm_2/">(数据结构与算法分析笔记)第三章  表  栈  队列</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/08/java_datastructures_alogorithm_1/">(数据结构与算法分析笔记)第二章  算法分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/07/java_inner_nested_class/">java嵌套类，内部类，匿名类学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/06/java_lang_1/">java object 类wait() notify() 以及Thread类 join() yile学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/04/java_methohandler/">java.lanf.invoke.MethodHandles 学习（深入理解Java虚拟机 学习笔记）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/30/android_build_apk/">(转)手把手教你AndroidStudio多渠道打包</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/24/android_view_measure/">android view measure方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/19/android_surface/">(转)android SurfaceView, GLSurfaceView, SurfaceTexture,TextureView</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/12/android_file_cache/">android getCacheDir()、getFilesDir()、getExternalFilesDir()、getExternalCacheDir()</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/11/java_Introspector/">(转)深入理解Java：内省(Introspector)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/06/android_appopsmanager/">android AppOpsManager 检查应用权限</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/05/android_broadcast/">android broadcast 学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/05/android_animator_favor/">android动画研究</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/05/java_reflect/">java反射机制学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/04/android_mobile_apk_decompile/">android引导用户开启应用权限及系统apk反编译分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/27/svnchecker_install/">svnchecker 适配安装以及踩过的坑</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/hexo_install/">hexo + github + 七牛运存储搭建简单的博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/begin_blog/">剑客爱编程--启动篇</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 2017 剑客爱编程
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >本站到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.1.22/require.min.js"></script>




    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

    <script src="//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js"></script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>